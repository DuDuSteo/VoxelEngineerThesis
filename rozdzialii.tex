\chapter{Projekt systemu}

W tym rozdziale zapoznamy siê z g³ównymi rozwi¹zaniami z zakresu in¿ynierii oprogramowania i projektowania, które pozwol¹ nam siê zaznajomiæ z podstawowym dzia³aniem aplikacji, jak i wymogów co do niniejszej pracy.





\section{Wymagania}





Na podstawie informacji zebranych z rozdzia³u 1 ,,Przegl¹d istniej¹cych rozwi¹zañ'', jak i mojej wiedzy na temat programów graficznych, okreœlone zosta³y podstawowe wymagania dotycz¹ce aplikacji.

\subsection{Wymagania funkcjonalne}

\begin{itemize}
\item Tworzenie modeli 3D.
\item Prosty interfejs u¿ytkownika.
\item Zmiana pozycji i wielkoœci okienek.
\item Edycja modeli w czasie rzeczywistym.
\item Tworzenie w³asnych opisów materia³ów
\item Zapis i odczyt modelu.
\item Zmiana w³aœciwoœci oœwietlenia.
\end{itemize}

\subsection{Wymagania niefunkcjonalne}

\begin{itemize}
\item Mo¿liwoœæ ponownego u¿ycia silnika 3D w innych projektach.
\item Wysoka responsywnoœæ na zmiany w modelu.
\item Dzia³anie na wielu platformach desktopowych (Windows, Linux, macOS).
\item Konsola debuguj¹ca w czasie rzeczywistym.
\end{itemize}






\section{Interfejs graficzny}





G³ównym za³o¿eniem interfejsu by³a prostota i customizowalnoœæ. Osi¹gniête to zosta³o poprzez wyeksponowanie modelu, który jest renderowany w czasie rzeczywistym przez silnik 3D edytora. 

\begin{figure}[htb]
\centering
\includegraphics[width=0.9\textwidth, keepaspectratio]{grafika/voxel-editor-main.png}
\caption{Ekran startowy programu, ¿ród³o: opracowanie w³asne} 
\label{rys-voxel-editor-main}
\end{figure}

By u¿ytkownikowi daæ wiêcej mo¿liwoœci ustawienia wygl¹du wyjœciowego, dodano opcjê zmiany wartoœci oœwietlenia, jak i t³a aplikacji. Wygl¹d okna ,,Scene'' zosta³ ukazany na rysunku \ref{rys-voxel-editor-scene-edit}.

\begin{figure}[htb]
\centering
\includegraphics[width=0.6\textwidth, keepaspectratio]{grafika/voxel-editor-scene-edit.png}
\caption{Okno zmiany ustawieñ sceny, ¿ród³o: opracowanie w³asne} 
\label{rys-voxel-editor-scene-edit}
\end{figure}

Zmiana aktywnego materia³u odbywa siê poprzez wybór z listy dostêpnych, jak i stworzonych materia³ów w oknie ,,Material'' (rysunek \ref{rys-voxel-editor-material-edit}).

\begin{figure}[htb]
\centering
\includegraphics[width=0.6\textwidth, keepaspectratio]{grafika/voxel-editor-material-edit.png}
\caption{Okno zmiany bie¿¹cego materia³u, jak i jego edycji, ¿ród³o: opracowanie w³asne} 
\label{rys-voxel-editor-material-edit}
\end{figure}

W celu u³atwienia wyboru koloru podczas tworzenia materia³u oraz wyboru t³a sceny, parametry ,,Color'' w przypadku okna ,,Scene'', jak i ,,Ambient'', ,,Diffuse'' i ,,Specular'' w przypadku okna ,,Material'' posiadaj¹ opcjê wyboru rêcznego z kwadratu kolorów (rysunek \ref{rys-voxel-editor-rgb}).

\begin{figure}[htb]
\centering
\includegraphics[width=0.5\textwidth, keepaspectratio]{grafika/voxel-editor-rgb.png}
\caption{Okno wyboru wartoœci koloru wraz z podgl¹dem po prawej stronie, ¿ród³o: opracowanie w³asne} 
\label{rys-voxel-editor-rgb}
\end{figure}





\section{Diagram przypadków u¿ycia i opisy}





Na przedstawionym poni¿ej (rysunek \ref{rys-diagram-przypadkow-uzycia}) diagramie przypadków u¿ycia, zawarte s¹ wszystkie najwa¿niejsze wymagania funkcjonalne w formie graficznej. 

\begin{figure}[htb]
\centering
\includegraphics[width=1\textwidth, keepaspectratio]{grafika/diagram-przypadkow-uzycia.png}
\caption{Diagram przypadków u¿ycia, ¿ród³o: opracowanie w³asne} 
\label{rys-diagram-przypadkow-uzycia}
\end{figure}

G³ównymi przypadkami u¿ycia tego systemu s¹ metody manipulacji modelu 3D. To one pozwalaj¹ nam na dodawanie wokseli, usuwanie ich oraz edytowanie materia³u. Przypadki te s¹ odpowiednio opisane w tabeli \ref{tabela_dodaj_voksel}, tabeli \ref{tabela_usun_woksel} oraz tabeli \ref{tabela_edytuj_material}.

\begin{table}[htb]
\centering
\caption[Opis przypadku u¿ycia ,,Dodaj woksel'']{Opis przypadku u¿ycia ,,Dodaj woksel''}
\begin{tabular}{|>{\bfseries}p{.3\textwidth}|p{.7\textwidth}|}
\hline
\rowcolor{Gray}
\rowstyle{\bfseries}
Sekcja & Treœæ \\\hline
Uczestnicz¹cy aktorzy & U¿ytkownik, Widok, Aplikacja, Obiekt \\\hline
Warunki wstêpne & W okienku ,,Edit Mode'' zaznaczony tryb ,,Add'' \\\hline
Warunki koñcowe & Dodanie woksela do obiektu \\\hline
Rezultat & Pojawienie siê woksela w miejscu wskazanym przez u¿ytkownika \\\hline
Scenariusz g³ówny & 
\begin{enumerate}[topsep=0pt, leftmargin=*]
\item U¿ytkownik wybiera materia³ z listy, b¹dŸ dodaje swój w³asny i go
zatwierdza.
\item U¿ytkownik nacelowuje na interesuj¹c¹ go sciankê woksela, w celu postawienia na obok niej nowego woksela, po czym zatwierdza prawym przyciskiem myszy.
\item Aplikacja przekazuje do obiektu dane klikniêcia.
\item Obiekt aktualizuje strukturê danych.
\item Widok zostaje odœwie¿ony w nastêpnej klatce.
\item U¿ytkownik widzi efekt swojego dzia³ania na modelu 3D.
\end{enumerate} \\\hline
Scenariusz wyj¹tku & Zdarzenie: U¿ytkownik nie klikn¹³ na œciankê istniej¹cego woksela 

Wynik: Brak dodania woksela do modelu 3D \\\hline
Zale¿noœci czasowe & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Czêstotliwoœæ wykonania: 0 lub wiêcej na sesjê.
\item Typowy czas realizacji: 8.9 ms.
\item Maksymalny czas realizacji: 33,2 ms. 
\end{enumerate} \\\hline
Wartoœci uzyskane przez aktorów po zakoñczeniu przypadków u¿ycia & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Pojawienie siê woksela w miejscu i o materiale wybranym przez u¿ytkownika.
\item Obiekt posiada zaktualizowan¹ strukturê o woksela.
\end{enumerate} \\\hline
\end{tabular}
\label{tabela_dodaj_voksel}
\end{table}

\begin{table}[htb]
\centering
\caption[Opis przypadku u¿ycia ,,Usuñ woksel'']{Opis przypadku u¿ycia ,,Usuñ woksel''}
\begin{tabular}{|>{\bfseries}p{.3\textwidth}|p{.7\textwidth}|}
\hline
\rowcolor{Gray}
\rowstyle{\bfseries}
Sekcja & Treœæ \\\hline
Uczestnicz¹cy aktorzy & U¿ytkownik, Widok, Aplikacja, Obiekt  \\\hline
Warunki wstêpne & W okienku ,,Edit Mode'' zaznaczony tryb ,,Remove''  \\\hline
Warunki koñcowe & Usuniêcie wskazanego woksela z obiektu \\\hline
Rezultat & Znikniêcie woksela w miejscu wskazanym przez u¿ytkownika \\\hline
Scenariusz g³ówny & 
\begin{enumerate}[topsep=0pt, leftmargin=*]
\item U¿ytkownik nacelowuje na interesuj¹cy go woksel, po czym zatwierdza
prawym przyciskiem myszy.
\item Aplikacja przekazuje do obiektu dane klikniêcia.
\item Obiekt zwraca woksel zainteresowania.
\item Aplikacja usuwa zwrócony woksel.
\item Widok zostaje odœwie¿ony w nastêpnej klatce.
\item U¿ytkownik widzi efekt swojego dzia³ania na modelu 3D.
\end{enumerate} \\\hline
Scenariusz wyj¹tku & Zdarzenie: U¿ytkownik nie klikn¹³ w istniej¹cego woksela 

Wynik: Brak usuniêcia woksela z modelu 3D \\\hline
Zale¿noœci czasowe & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Czêstotliwoœæ wykonania: 0 lub wiêcej na sesjê.
\item Typowy czas realizacji: 5.9 ms.
\item Maksymalny czas realizacji: 16,6 ms. 
\end{enumerate} \\\hline
Wartoœci uzyskane przez aktorów po zakoñczeniu przypadków u¿ycia & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Znikniêcie woksela w miejscu wybranym przez u¿ytkownika.
\item Obiekt posiada zaktualizowan¹ strukturê bez klikniêtego woksela.
\end{enumerate} \\\hline
\end{tabular}
\label{tabela_usun_woksel}
\end{table}

\begin{table}[htb]
\centering
\caption[Opis przypadku u¿ycia ,,Edytuj materia³'']{Opis przypadku u¿ycia ,,Edytuj materia³''}
\begin{tabular}{|>{\bfseries}p{.3\textwidth}|p{.7\textwidth}|}
\hline
\rowcolor{Gray}
\rowstyle{\bfseries}
Sekcja & Treœæ \\\hline
Uczestnicz¹cy aktorzy & U¿ytkownik, Widok, Aplikacja, Obiekt  \\\hline
Warunki wstêpne & W okienku ,,Edit Mode'' zaznaczony tryb ,,Color''  \\\hline
Warunki koñcowe & Zmiana materia³u we wskazanym miejscu w obiekcie \\\hline
Rezultat & Zmiana materia³u woksela w miejscu wskazanym przez u¿ytkownika \\\hline
Scenariusz g³ówny & 
\begin{enumerate}[topsep=0pt, leftmargin=*]
\item U¿ytkownik nacelowuje na interesuj¹cy go woksel, po czym zatwierdza
prawym przyciskiem myszy.
\item Aplikacja przekazuje do obiektu dane klikniêcia.
\item Obiekt zwraca woksel zainteresowania.
\item Aplikacja zmiania kolor zwróconego woksela na ostatni wybrany materia³.
\item Widok zostaje odœwie¿ony w nastêpnej klatce.
\item U¿ytkownik widzi efekt swojego dzia³ania na modelu 3D.
\end{enumerate} \\\hline
Scenariusz wyj¹tku & Zdarzenie: U¿ytkownik nie klikn¹³ w istniej¹cego woksela 

Wynik: Brak zmiany koloru woksela w modelu 3D \\\hline
Zale¿noœci czasowe & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Czêstotliwoœæ wykonania: 0 lub wiêcej na sesjê.
\item Typowy czas realizacji: 3.2 ms.
\item Maksymalny czas realizacji: 16,6 ms. 
\end{enumerate} \\\hline
Wartoœci uzyskane przez aktorów po zakoñczeniu przypadków u¿ycia & \begin{enumerate}[topsep=0pt, leftmargin=*]
\item Zmiana w³aœciwoœci materia³u woksela w miejscu wybranym przez u¿ytkownika.
\item Obiekt posiada zmienion¹ specyfikacje materia³u w klikniêtym wokselu.
\end{enumerate} \\\hline
\end{tabular}
\label{tabela_edytuj_material}
\end{table}




\section{Diagramy stanów}




\begin{figure}[htb]
\centering
\includegraphics[width=0.9\textwidth, keepaspectratio]{grafika/diagram-stanow-wczytywanie.png}
\caption{Diagram stanów dla wczytywania, ¿ród³o: opracowanie w³asne} 
\label{rys-diagram-stanow-wczytywanie}
\end{figure}

\begin{figure}[htb]
\centering
\includegraphics[width=0.9\textwidth, keepaspectratio]{grafika/diagram-stanow-edycja.png}
\caption{Diagram stanów dla edycji, ¿ród³o: opracowanie w³asne} 
\label{rys-diagram-stanow-edycja}
\end{figure}


